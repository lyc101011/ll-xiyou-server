
-- local 副本_无底洞 = class()
-- Q_鱼肚怪 = {{53,55,"鲛人","鱼肚怪"},{64,58,"鲛人","鱼肚怪"}}
-- Q_守门妖将 = {{45,29,"百足将军","守门妖将"},{55,27,"百足将军","守门妖将"}}
-- Q_镇守的妖精 = {{"千年蛇魅","妖邪巫师"},{"千年蛇魅","妖邪巫师"},{"千年蛇魅","妖邪巫师"},{"千年蛇魅","妖邪巫师"},{"千年蛇魅","妖邪巫师"},
-- {"百足将军","陷空妖将"},{"百足将军","陷空妖将"},{"百足将军","陷空妖将"},{"百足将军","陷空妖将"},
-- {"犀牛将军人形","巡山蛮妖"},{"犀牛将军人形","巡山蛮妖"},{"犀牛将军人形","巡山蛮妖"},{"犀牛将军人形","巡山蛮妖"},{"犀牛将军人形","巡山蛮妖"}}
-- Q_小和尚 = {{105,13,"男人_胖和尚","惊慌的小和尚"},{110,16,"男人_胖和尚","惊慌的小和尚"},{117,20,"男人_胖和尚","惊慌的小和尚"},
-- {123,17,"男人_胖和尚","惊慌的小和尚"},{99,18,"男人_胖和尚","惊慌的小和尚"}}
-- Q_村民 = {{44,3,"樵夫","被绑的村民"},{41,5,"男人_书生","被绑的村民"},{47,5,"刘老爹","被绑的村民"},{45,10,"樵夫","被绑的村民"},{50,9,"刘老爹","被绑的村民"}}
-- function 副本_无底洞:初始化()
-- 	地图处理类.地图数据[6047]={npc={},单位={},传送圈={}}
-- 	地图处理类.地图玩家[6047]={}
-- 	地图处理类.地图坐标[6047]=地图处理类.地图坐标[1042]
-- 	地图处理类.地图单位[6047]={}
-- 	地图处理类.单位编号[6047]=1000

--   地图处理类.地图数据[6048]={npc={},单位={},传送圈={}}
--   地图处理类.地图玩家[6048]={}
--   地图处理类.地图坐标[6048]=地图处理类.地图坐标[1002]
--   地图处理类.地图单位[6048]={}
--   地图处理类.单位编号[6048]=1000

--   地图处理类.地图数据[6049]={npc={},单位={},传送圈={}}
--   地图处理类.地图玩家[6049]={}
--   地图处理类.地图坐标[6049]=地图处理类.地图坐标[1127]
--   地图处理类.地图单位[6049]={}
--   地图处理类.单位编号[6049]=1000

--   地图处理类.地图数据[6050]={npc={},单位={},传送圈={}}
--   地图处理类.地图玩家[6050]={}
--   地图处理类.地图坐标[6050]=地图处理类.地图坐标[1128]
--   地图处理类.地图单位[6050]={}
--   地图处理类.单位编号[6050]=1000

--   地图处理类.地图数据[6051]={npc={},单位={},传送圈={}}
--   地图处理类.地图玩家[6051]={}
--   地图处理类.地图坐标[6051]=地图处理类.地图坐标[1214]
--   地图处理类.地图单位[6051]={}
--   地图处理类.单位编号[6051]=1000

--   地图处理类.地图数据[6052]={npc={},单位={},传送圈={}}
--   地图处理类.地图玩家[6052]={}
--   地图处理类.地图坐标[6052]=地图处理类.地图坐标[1112]
--   地图处理类.地图单位[6052]={}
--   地图处理类.单位编号[6052]=1000

--   地图处理类.地图数据[6053]={npc={},单位={},传送圈={}}
--   地图处理类.地图玩家[6053]={}
--   地图处理类.地图坐标[6053]=地图处理类.地图坐标[1179]
--   地图处理类.地图单位[6053]={}
--   地图处理类.单位编号[6053]=1000
-- end
-- function 副本_无底洞:取无底洞次数限制(id,次数)
--   if 副本数据.无底洞.完成[id] then
--     添加最后对话(id,"你今日已经完成过该副本了")
--     return true
--   elseif 玩家数据[id].队伍 ~= 0 then
--     for i=1,#队伍数据[玩家数据[id].队伍].成员数据 do
--       local lsid = 队伍数据[玩家数据[id].队伍].成员数据[i]
--       if 副本数据.无底洞.完成[lsid]then
--         添加最后对话(id,玩家数据[lsid].角色.名称.."今日已经完成过该副本了")
--         return true
--       end
--     end
--   end
--       return false
-- end
-- function 副本_无底洞:开启无底洞副本(id)
--   if 玩家数据[id].队伍==0 or 玩家数据[id].队长==false  then
--     常规提示(id,"#Y/该任务必须组队完成且由队长领取")
--     return
--   elseif 取队伍人数(id)<1 then
--     常规提示(id,"#Y此副本要求队伍人数不低于5人")
--     return
--   elseif  取等级要求(id,60)==false then
--     常规提示(id,"#Y此副本要求角色等级不能低于60级")
--     return
--   elseif self:取无底洞次数限制(id) then
--     return
--   elseif 取队员任务存在(玩家数据[id].队伍,996) then
--     常规提示(id,"#Y/队伍中已有队员正在进行该副本任,无法领取新的副本")
--     return
--   end
--   local 任务id=id.."_996_"..os.time().."_"..随机序列.."_"..取随机数(1,999)
--   副本数据.无底洞.进行[id]={进程=1,主任务id=任务id}
--   设置无底洞副本(id)
--   任务数据[任务id]={
--     id=任务id,
--     起始=os.time(),
--     结束=7200,
--     玩家id={},
--     队伍组={},
--     副本id=id,
--     类型=996
--   }
--   local 队伍id=玩家数据[id].队伍
--   for n=1,#队伍数据[队伍id].成员数据 do
--     local 临时id=队伍数据[队伍id].成员数据[n]
--       任务数据[任务id].队伍组[#任务数据[任务id].队伍组+1]=临时id
--       玩家数据[临时id].角色:添加任务(任务id)
--       副本数据.无底洞.完成[临时id]=true
--       常规提示(临时id,"#Y你开启了无底洞副本")
--   end
-- end
-- function 设置无底洞副本(id)
--   local 随机名称={}
--   local 随机模型={}
--   玩家数据[id].zhandou=0
--   local 队伍id=玩家数据[id].队伍
--   if 副本数据.无底洞.进行[id].进程==1 then
--     local 任务id=id.."_997_"..os.time().."_"..随机序列.."_"..取随机数(88,99999999).."_1_"
--     local 地图=6047
--     local xy=地图处理类.地图坐标[地图]:取随机点()
--     任务数据[任务id]={
--       id=任务id,
--       起始=os.time(),
--       结束=7200,
--       玩家id=id,
--       队伍组={},
--       名称="不知名少女",
--       模型="飞燕女",
--       x=90,
--       y=72,
--       方向=0,
--       副本id=id,
--       地图编号=地图,
--       地图名称=取地图名称(地图),
--       类型=997
--     }
--     地图处理类:添加单位(任务id)
--   elseif 副本数据.无底洞.进行[id].进程==2 then
--     副本数据.无底洞.进行[id].蟊贼=0
--     local 任务id=id.."_998_"..os.time().."_"..随机序列.."_"..取随机数(88,99999999).."_1_"
--     local 地图=6047
--     local xy=地图处理类.地图坐标[地图]:取随机点()
--     任务数据[任务id]={
--       id=任务id,
--       起始=os.time(),
--       结束=7200,
--       玩家id=id,
--       队伍组={},
--       名称="唐僧",
--       模型="唐僧",
--       x=85,
--       y=77,
--       方向=3,
--       副本id=id,
--       地图编号=地图,
--       地图名称=取地图名称(地图),
--       类型=998
--     }
--     地图处理类:添加单位(任务id)
--     local 任务id=id.."_999_"..os.time().."_"..随机序列.."_"..取随机数(88,99999999).."_1_"
--     local 地图=6047
--     local xy=地图处理类.地图坐标[地图]:取随机点()
--     任务数据[任务id]={
--       id=任务id,
--       起始=os.time(),
--       结束=7200,
--       玩家id=id,
--       队伍组={},
--       名称="猪八戒",
--       模型="猪八戒",
--       x=81,
--       y=71,
--       方向=1,
--       副本id=id,
--       地图编号=地图,
--       地图名称=取地图名称(地图),
--       类型=999
--     }
--     地图处理类:添加单位(任务id)
--     local 任务id=id.."_910_"..os.time().."_"..随机序列.."_"..取随机数(88,99999999).."_1_"
--     local 地图=6047
--     local xy=地图处理类.地图坐标[地图]:取随机点()
--     任务数据[任务id]={
--       id=任务id,
--       起始=os.time(),
--       结束=7200,
--       玩家id=id,
--       队伍组={},
--       名称="沙僧",
--       模型="沙和尚",
--       x=76,
--       y=77,
--       方向=3,
--       副本id=id,
--       地图编号=地图,
--       地图名称=取地图名称(地图),
--       类型=910
--     }
--     地图处理类:添加单位(任务id)
--      for i=1,10 do
--       任务id=id.."_911_"..os.time().."_"..随机序列.."_"..取随机数(1,999)..i
--       local 地图=6047
--       local 随机名称={"深山强盗","巡山强盗","深山恶贼","巡山恶贼"}
--       local 随机模型={"强盗","山贼"}
--       local xy=地图处理类.地图坐标[地图]:取随机点()
--       任务数据[任务id]={
--         id=任务id,
--         起始=os.time(),
--         结束=7200,
--         玩家id=id,
--         队伍组={},
--         名称=随机名称[取随机数(1,#随机名称)],
--         模型=随机模型[取随机数(1,#随机模型)],
--         事件="明雷活动",
--         x=xy.x,
--         y=xy.y,
--         方向=方向,
--         副本id=id,
--         地图编号=地图,
--         地图名称=取地图名称(地图),
--         类型=911,
--       }
--       地图处理类:添加单位(任务id)
--     end
--       local text1 = {"从山林中不时传出些怪异的动物声啊.","这一路似乎不会太平！"}
--       for n=1,#队伍数据[队伍id].成员数据 do
--         local 临时id=队伍数据[队伍id].成员数据[n]
--         发送数据(玩家数据[临时id].连接id,6557,{文本=text1,类型="无底洞女子对话",字体=nil,音乐=nil,背景=nil,横排显示=true,动画=nil})
--       end
--   elseif 副本数据.无底洞.进行[id].进程==3 then
--     地图 = 6047
--     副本数据.无底洞.进行[id].头领 = {大头领=0,二头领=0}
--     local xy=地图处理类.地图坐标[地图]:取随机点()
--     随机名称={"山贼大头领","山贼二头领"}
--     随机模型={"强盗","山贼"}
--     local 方向 = 0
--     for i=1,#随机模型 do
--       local xy=地图处理类.地图坐标[地图]:取随机点()
--       if 随机名称[i]=="山贼大头领" then
--         xy.x=50
--         xy.y=12
--       elseif 随机名称[i]=="山贼二头领" then
--         xy.x=58
--         xy.y=16
--       end
--       任务id=id.."_912_"..os.time().."_"..随机序列.."_"..取随机数(88,99999999)..i
--       任务数据[任务id]={
--         id=任务id,
--         起始=os.time(),
--         结束=7200,
--         玩家id=id,
--         队伍组={},
--         名称=随机名称[i],
--         模型=随机模型[i],
--         变异=true,
--         x=xy.x,
--         y=xy.y,
--         方向=1,
--         副本id=id,
--         地图编号=地图,
--         地图名称=取地图名称(地图),
--         类型=912,
--       }
--       地图处理类:添加单位(任务id)
--     end
--     for i=1,5 do
--       任务id=id.."_913_"..os.time().."_"..随机序列.."_"..取随机数(1,999)..i
--       local 地图=6047
--       local xy={x=Q_村民[i][1],y=Q_村民[i][2]}
--       local 模型=Q_村民[i][3]
--       local 名称=Q_村民[i][4]
--       任务数据[任务id]={
--         id=任务id,
--         起始=os.time(),
--         结束=7200,
--         玩家id=id,
--         队伍组={},
--         名称=名称,
--         模型=模型,
--         事件="明雷活动",
--         x=xy.x,
--         y=xy.y,
--         方向=1,
--         副本id=id,
--         地图编号=地图,
--         地图名称=取地图名称(地图),
--         类型=913,
--       }
--       地图处理类:添加单位(任务id)
--     end
--  elseif 副本数据.无底洞.进行[id].进程==4 then
--     local 任务id=id.."_914_"..os.time().."_"..随机序列.."_"..取随机数(88,99999999).."_1_"
--     local 地图=6047
--     local xy=地图处理类.地图坐标[地图]:取随机点()
--     任务数据[任务id]={
--       id=任务id,
--       起始=os.time(),
--       结束=7200,
--       玩家id=id,
--       队伍组={},
--       名称="黑松林土地老儿",
--       模型="男人_土地",
--       x=54,
--       y=88,
--       方向=0,
--       副本id=id,
--       地图编号=地图,
--       地图名称=取地图名称(地图),
--       类型=914
--     }
--     地图处理类:添加单位(任务id)
--  elseif 副本数据.无底洞.进行[id].进程==5 then
--     local 任务id=id.."_915_"..os.time().."_"..随机序列.."_"..取随机数(88,99999999).."_1_"
--     local 地图=6048
--     local xy=地图处理类.地图坐标[地图]:取随机点()
--     任务数据[任务id]={
--       id=任务id,
--       起始=os.time(),
--       结束=7200,
--       玩家id=id,
--       队伍组={},
--       名称="唐僧法师",
--       模型="唐僧",
--       x=117,
--       y=10,
--       方向=1,
--       副本id=id,
--       地图编号=地图,
--       地图名称=取地图名称(地图),
--       类型=915
--     }
--     地图处理类:添加单位(任务id)
--   for i=1,5 do
--       任务id=id.."_916_"..os.time().."_"..随机序列.."_"..取随机数(1,999)..i
--       local 地图=6048
--       local xy={x=Q_小和尚[i][1],y=Q_小和尚[i][2]}
--       local 模型=Q_小和尚[i][3]
--       local 名称=Q_小和尚[i][4]
--       任务数据[任务id]={
--         id=任务id,
--         起始=os.time(),
--         结束=7200,
--         玩家id=id,
--         队伍组={},
--         名称=名称,
--         模型=模型,
--         事件="明雷活动",
--         x=xy.x,
--         y=xy.y,
--         方向=1,
--         副本id=id,
--         地图编号=地图,
--         地图名称=取地图名称(地图),
--         类型=916,
--       }
--       地图处理类:添加单位(任务id)
--     end
--  elseif 副本数据.无底洞.进行[id].进程==6 then
--   副本数据.无底洞.进行[id].神秘少女=0
--   for i=1,4 do
--       任务id=id.."_917_"..os.time().."_"..随机序列.."_"..取随机数(1,999)..i
--       local 地图=6048
--       local xy=地图处理类.地图坐标[地图]:取随机点()
--       任务数据[任务id]={
--         id=任务id,
--         起始=os.time(),
--         结束=7200,
--         玩家id=id,
--         队伍组={},
--         名称="可疑少女",
--         模型="千年蛇魅",
--         事件="明雷活动",
--         x=xy.x,
--         y=xy.y,
--         方向=1,
--         副本id=id,
--         地图编号=地图,
--         地图名称=取地图名称(地图),
--         类型=917,
--       }
--       地图处理类:添加单位(任务id)
--     end
--  elseif 副本数据.无底洞.进行[id].进程==7 then
--   副本数据.无底洞.进行[id].八戒=0
--     local 任务id=id.."_918_"..os.time().."_"..随机序列.."_"..取随机数(88,99999999).."_1_"
--     local 地图=6048
--     local xy=地图处理类.地图坐标[地图]:取随机点()
--     任务数据[任务id]={
--       id=任务id,
--       起始=os.time(),
--       结束=7200,
--       玩家id=id,
--       队伍组={},
--       名称="八戒",
--       模型="新猪八戒",
--       x=10,
--       y=87,
--       方向=1,
--       副本id=id,
--       地图编号=地图,
--       地图名称=取地图名称(地图),
--       类型=918
--     }
--     地图处理类:添加单位(任务id)
--     发送数据(玩家数据[id].连接id,6558,{调用={996,2}})
-- elseif 副本数据.无底洞.进行[id].进程==8 then
--     local 任务id=id.."_919_"..os.time().."_"..随机序列.."_"..取随机数(88,99999999).."_1_"
--     local 地图=6048
--     local xy=地图处理类.地图坐标[地图]:取随机点()
--     任务数据[任务id]={
--       id=任务id,
--       起始=os.time(),
--       结束=7200,
--       玩家id=id,
--       队伍组={},
--       名称="孙悟空",
--       模型="孙悟空",
--       x=44,
--       y=57,
--       方向=1,
--       副本id=id,
--       地图编号=地图,
--       地图名称=取地图名称(地图),
--       类型=919
--     }
--     地图处理类:添加单位(任务id)
--     local 任务id=id.."_920_"..os.time().."_"..随机序列.."_"..取随机数(88,99999999).."_1_"
--     local 地图=6048
--     local xy=地图处理类.地图坐标[地图]:取随机点()
--     任务数据[任务id]={
--       id=任务id,
--       起始=os.time(),
--       结束=7200,
--       玩家id=id,
--       队伍组={},
--       名称="沙僧",
--       模型="沙和尚",
--       x=42,
--       y=51,
--       方向=1,
--       副本id=id,
--       地图编号=地图,
--       地图名称=取地图名称(地图),
--       类型=920
--     }
--     地图处理类:添加单位(任务id)
--     local 任务id=id.."_921_"..os.time().."_"..随机序列.."_"..取随机数(88,99999999).."_1_"
--     local 地图=6048
--     local xy=地图处理类.地图坐标[地图]:取随机点()
--     任务数据[任务id]={
--       id=任务id,
--       起始=os.time(),
--       结束=7200,
--       玩家id=id,
--       队伍组={},
--       名称="土地老儿",
--       模型="男人_土地",
--       x=38,
--       y=61,
--       方向=3,
--       副本id=id,
--       地图编号=地图,
--       地图名称=取地图名称(地图),
--       类型=921
--     }
--     地图处理类:添加单位(任务id)
-- elseif 副本数据.无底洞.进行[id].进程== 9 then
--  副本数据.无底洞.进行[id].镇守的妖精=0
--      for i=1,14 do
--       任务id=id.."_922_"..os.time().."_"..随机序列.."_"..取随机数(1,999)..i
--       local 地图=6049
--       local 模型=Q_镇守的妖精[i][1]
--       local 名称=Q_镇守的妖精[i][2]
--       local xy=地图处理类.地图坐标[地图]:取随机点()
--       任务数据[任务id]={
--         id=任务id,
--         起始=os.time(),
--         结束=7200,
--         玩家id=id,
--         队伍组={},
--         名称=名称,
--         模型=模型,
--         事件="明雷活动",
--         x=xy.x,
--         y=xy.y,
--         方向=方向,
--         副本id=id,
--         地图编号=地图,
--         地图名称=取地图名称(地图),
--         类型=922,
--       }
--       地图处理类:添加单位(任务id)
--     end
--     local 任务id=id.."_923_"..os.time().."_"..随机序列.."_"..取随机数(88,99999999).."_1_"
--     local 地图=6049
--     local xy=地图处理类.地图坐标[地图]:取随机点()
--     任务数据[任务id]={
--       id=任务id,
--       起始=os.time(),
--       结束=7200,
--       玩家id=id,
--       队伍组={},
--       名称="陷空山土地",
--       模型="男人_土地",
--       x=53,
--       y=27,
--       方向=0,
--       副本id=id,
--       地图编号=地图,
--       地图名称=取地图名称(地图),
--       类型=923
--     }
--     地图处理类:添加单位(任务id)
-- elseif 副本数据.无底洞.进行[id].进程== 10 then
--     local 任务id=id.."_924_"..os.time().."_"..随机序列.."_"..取随机数(88,99999999).."_1_"
--     local 地图=6050
--     local xy=地图处理类.地图坐标[地图]:取随机点()
--     任务数据[任务id]={
--       id=任务id,
--       起始=os.time(),
--       结束=7200,
--       玩家id=id,
--       队伍组={},
--       名称="白面将军",
--       模型="锦毛貂精",
--       变异=true,
--       x=52,
--       y=9,
--       方向=0,
--       副本id=id,
--       地图编号=地图,
--       地图名称=取地图名称(地图),
--       类型=924
--     }
--     地图处理类:添加单位(任务id)
-- elseif 副本数据.无底洞.进行[id].进程== 11 then
--     local 任务id=id.."_925_"..os.time().."_"..随机序列.."_"..取随机数(88,99999999).."_1_"
--     local 地图=6050
--     local xy=地图处理类.地图坐标[地图]:取随机点()
--     任务数据[任务id]={
--       id=任务id,
--       起始=os.time(),
--       结束=7200,
--       玩家id=id,
--       队伍组={},
--       名称="陷空山土地",
--       模型="男人_土地",
--       x=40,
--       y=15,
--       方向=0,
--       副本id=id,
--       地图编号=地图,
--       地图名称=取地图名称(地图),
--       类型=925
--     }
--     地图处理类:添加单位(任务id)
-- elseif 副本数据.无底洞.进行[id].进程== 12 then
--     local 任务id=id.."_926_"..os.time().."_"..随机序列.."_"..取随机数(88,99999999).."_1_"
--     local 地图=6051
--     local xy=地图处理类.地图坐标[地图]:取随机点()
--     任务数据[任务id]={
--       id=任务id,
--       起始=os.time(),
--       结束=7200,
--       玩家id=id,
--       队伍组={},
--       名称="玄奘法师",
--       模型="唐僧",
--       x=47,
--       y=22,
--       方向=0,
--       副本id=id,
--       地图编号=地图,
--       地图名称=取地图名称(地图),
--       类型=926
--     }
--     地图处理类:添加单位(任务id)
-- elseif 副本数据.无底洞.进行[id].进程== 13 then
--  副本数据.无底洞.进行[id].数量=0
--     for i=1,2 do
--       任务id=id.."_927_"..os.time().."_"..随机序列.."_"..取随机数(1,999)..i
--       local 地图=6051
--       local xy={x=Q_守门妖将[i][1],y=Q_守门妖将[i][2]}
--       local 模型=Q_守门妖将[i][3]
--       local 名称=Q_守门妖将[i][4]
--       任务数据[任务id]={
--         id=任务id,
--         起始=os.time(),
--         结束=7200,
--         玩家id=id,
--         队伍组={},
--         名称=名称,
--         模型=模型,
--         事件="明雷活动",
--         变异=true,
--         x=xy.x,
--         y=xy.y,
--         方向=方向,
--         副本id=id,
--         地图编号=地图,
--         地图名称=取地图名称(地图),
--         类型=927,
--       }
--       地图处理类:添加单位(任务id)
--     end
-- elseif 副本数据.无底洞.进行[id].进程== 14 then
--     local 任务id=id.."_928_"..os.time().."_"..随机序列.."_"..取随机数(88,99999999).."_1_"
--     local 地图=6052
--     local xy=地图处理类.地图坐标[地图]:取随机点()
--     任务数据[任务id]={
--       id=任务id,
--       起始=os.time(),
--       结束=7200,
--       玩家id=id,
--       队伍组={},
--       名称="托塔李天王",
--       模型="李靖",
--       x=40,
--       y=53,
--       方向=0,
--       副本id=id,
--       地图编号=地图,
--       地图名称=取地图名称(地图),
--       类型=928
--     }
--     地图处理类:添加单位(任务id)
-- elseif 副本数据.无底洞.进行[id].进程== 15 then
--  副本数据.无底洞.进行[id].鱼肚怪=0
--     for i=1,2 do
--       任务id=id.."_929_"..os.time().."_"..随机序列.."_"..取随机数(1,999)..i
--       local 地图=6052
--       local xy={x=Q_鱼肚怪[i][1],y=Q_鱼肚怪[i][2]}
--       local 模型=Q_鱼肚怪[i][3]
--       local 名称=Q_鱼肚怪[i][4]
--       任务数据[任务id]={
--         id=任务id,
--         起始=os.time(),
--         结束=7200,
--         玩家id=id,
--         队伍组={},
--         名称=名称,
--         模型=模型,
--         变异=true,
--         事件="明雷活动",
--         x=xy.x,
--         y=xy.y,
--         方向=0,
--         副本id=id,
--         地图编号=地图,
--         地图名称=取地图名称(地图),
--         类型=929,
--       }
--       地图处理类:添加单位(任务id)
--     end
-- elseif 副本数据.无底洞.进行[id].进程== 16 then
--     local 任务id=id.."_931_"..os.time().."_"..随机序列.."_"..取随机数(88,99999999).."_1_"
--     local 地图=6052
--     local xy=地图处理类.地图坐标[地图]:取随机点()
--     任务数据[任务id]={
--       id=任务id,
--       起始=os.time(),
--       结束=7200,
--       玩家id=id,
--       队伍组={},
--       名称="托塔李天王",
--       模型="李靖",
--       x=40,
--       y=53,
--       方向=0,
--       副本id=id,
--       地图编号=地图,
--       地图名称=取地图名称(地图),
--       类型=931
--     }
--     地图处理类:添加单位(任务id)
-- elseif 副本数据.无底洞.进行[id].进程== 17 then
--     local 任务id=id.."_930_"..os.time().."_"..随机序列.."_"..取随机数(88,99999999).."_1_"
--     local 地图=6053
--     local xy=地图处理类.地图坐标[地图]:取随机点()
--     任务数据[任务id]={
--       id=任务id,
--       起始=os.time(),
--       结束=7200,
--       玩家id=id,
--       队伍组={},
--       名称="宝箱",
--       模型="宝箱",
--       x=17,
--       y=71,
--       方向=0,
--       副本id=id,
--       地图编号=地图,
--       地图名称=取地图名称(地图),
--       类型=930
--     }
--     地图处理类:添加单位(任务id)

--   end
-- end

-- __GWdh111[997]=function(连接id,数字id,序列,标识,地图)
--   local 对话数据 = {}
--     对话数据.模型=任务数据[标识].模型
--   对话数据.名称=任务数据[标识].名称
--     if 任务数据[标识].zhandou==nil then
--     local 副本id=任务数据[标识].副本id
--     if (任务数据[玩家数据[数字id].角色:取任务(996)] or {}).副本id ~= 副本id then 添加最后对话(数字id,"我好像不认识你吧？？？") return end
--       完成无底洞任务({数字id},玩家数据[数字id].地图单位.标识,997)
--     end
--   return 对话数据
-- end
-- __GWdh111[911]=function(连接id,数字id,序列,标识,地图)
--   local 对话数据 = {}
--     对话数据.模型=任务数据[标识].模型
--   对话数据.名称=任务数据[标识].名称
--   if 任务数据[标识].zhandou==nil then
--     local 副本id=任务数据[标识].副本id
--     if (任务数据[玩家数据[数字id].角色:取任务(996)] or {}).副本id ~= 副本id then 添加最后对话(数字id,"我好像不认识你吧？？？") return end
--     对话数据.对话="尔等单子不小，敢在林中散步，还不孝敬给我几百两！！"
--     对话数据.选项={"不给！开打吧！","你太可怕了，我先溜达下！"}
--   else
--     对话数据.对话="我正在战斗中，请勿打扰。"
--   end
--   return 对话数据
-- end

-- __GWdh222[911]=function (连接id,数字id,序号,内容)
--   local 事件=内容[1]
--   local 名称=内容[3]
--   if 事件=="不给！开打吧！" then
--     if 任务数据[玩家数据[数字id].地图单位.标识]==nil then return end
--     if 任务数据[玩家数据[数字id].地图单位.标识].zhandou~=nil then 常规提示(数字id,"#Y/对方正在战斗中") return  end
--     if 玩家数据[数字id].队伍==0 then 常规提示(数字id,"#Y必须组队才能触发该活动") return end
--     if 取队伍人数(数字id)<1 then 常规提示(数字id,"#Y/挑战无底洞最少要有五人") return  end
--     if 取等级要求(数字id,60)==false then 常规提示(数字id,"#Y/挑战无底洞至少要达到60级") return  end
--     战斗准备类:创建战斗(数字id+0,155609,玩家数据[数字id].地图单位.标识)
--     任务数据[玩家数据[数字id].地图单位.标识].zhandou=true
--     玩家数据[数字id].地图单位=nil
--     return
--   end
-- end
-- __GWdh111[912]=function(连接id,数字id,序列,标识,地图)
--   local 对话数据 = {}
--     对话数据.模型=任务数据[标识].模型
--   对话数据.名称=任务数据[标识].名称
--     local 副本id=任务数据[标识].副本id
--     if (任务数据[玩家数据[数字id].角色:取任务(996)] or {}).副本id ~= 副本id then 添加最后对话(数字id,"我好像不认识你吧？？？") return end
--   if 任务数据[标识].zhandou==nil then
--     local 副本id=任务数据[标识].副本id
--     if 任务数据[标识].名称 == "山贼大头领" and 副本数据.无底洞.进行[数字id].头领.大头领==0  then
--     对话数据.对话="是什么人，肝胆打扰本大王休息！"
--     对话数据.选项={"我看你是找打！","你太可怕了，我先溜达下！"}
--     elseif 任务数据[标识].名称 == "山贼二头领" and 副本数据.无底洞.进行[数字id].头领.二头领==0 then
--     对话数据.对话="是什么人，肝胆打扰本大王休息！"
--     对话数据.选项={"先铲除你!","你太可怕了，我先溜达下！"}
--   else
--     对话数据.对话="你已完成此任务。"
--   end
--   end
--   return 对话数据
-- end

-- __GWdh222[912]=function (连接id,数字id,序号,内容)
--   local 事件=内容[1]
--   local 名称=内容[3]
--   if 事件=="我看你是找打！" then
--     if 任务数据[玩家数据[数字id].地图单位.标识]==nil then return end
--     if 任务数据[玩家数据[数字id].地图单位.标识].zhandou~=nil then 常规提示(数字id,"#Y/对方正在战斗中") return  end
--     if 玩家数据[数字id].队伍==0 then 常规提示(数字id,"#Y必须组队才能触发该活动") return end
--     if 取队伍人数(数字id)<1 then 常规提示(数字id,"#Y/挑战无底洞最少要有五人") return  end
--     if 取等级要求(数字id,60)==false then 常规提示(数字id,"#Y/挑战无底洞至少要达到60级") return  end
--     战斗准备类:创建战斗(数字id+0,155610,玩家数据[数字id].地图单位.标识)
--     任务数据[玩家数据[数字id].地图单位.标识].zhandou=true
--     玩家数据[数字id].地图单位=nil
--     return
--   elseif 事件=="先铲除你!" then
--     if 任务数据[玩家数据[数字id].地图单位.标识]==nil then return end
--     if 任务数据[玩家数据[数字id].地图单位.标识].zhandou~=nil then 常规提示(数字id,"#Y/对方正在战斗中") return  end
--     if 玩家数据[数字id].队伍==0 then 常规提示(数字id,"#Y必须组队才能触发该活动") return end
--     if 取队伍人数(数字id)<1 then 常规提示(数字id,"#Y/挑战无底洞最少要有五人") return  end
--     if 取等级要求(数字id,60)==false then 常规提示(数字id,"#Y/挑战无底洞至少要达到60级") return  end
--     战斗准备类:创建战斗(数字id+0,155611,玩家数据[数字id].地图单位.标识)
--     任务数据[玩家数据[数字id].地图单位.标识].zhandou=true
--     玩家数据[数字id].地图单位=nil
--     return
--   end
-- end
-- __GWdh111[914]=function(连接id,数字id,序列,标识,地图)
--   local 对话数据 = {}
--     对话数据.模型=任务数据[标识].模型
--   对话数据.名称=任务数据[标识].名称
--   if 任务数据[标识].zhandou==nil then
--     local 副本id=任务数据[标识].副本id
--     if (任务数据[玩家数据[数字id].角色:取任务(996)] or {}).副本id ~= 副本id then 添加最后对话(数字id,"我好像不认识你吧？？？") return end
--     if 副本数据.无底洞.进行[数字id].进程==4  then
--     对话数据.对话="天色已晚，况且这那被救下的妇人突然昏厥，为照顾好此妇，唐僧师徒已落脚在旁边不远的镇海禅林寺，各位少侠可通过老朽去和唐僧师徒汇合。"
--     对话数据.选项={"请把我们带到镇海禅林寺","我这边在转转"}
--     else
--     对话数据.对话="请完成之前任务！"
--     end
--   end
--   return 对话数据
-- end
-- __GWdh222[914]=function (连接id,数字id,序号,内容)
--   local 事件=内容[1]
--   local 名称=内容[3]
--   if 事件=="请把我们带到镇海禅林寺" then
--     if 任务数据[玩家数据[数字id].地图单位.标识]==nil then return end
--     完成无底洞任务({数字id},玩家数据[数字id].地图单位.标识,914)
--     玩家数据[数字id].地图单位=nil
--     return
--   end
-- end
-- __GWdh111[915]=function(连接id,数字id,序列,标识,地图)
--   local 对话数据 = {}
--     对话数据.模型=任务数据[标识].模型
--   对话数据.名称=任务数据[标识].名称
--   if 任务数据[标识].zhandou==nil then
--     local 副本id=任务数据[标识].副本id
--     if (任务数据[玩家数据[数字id].角色:取任务(996)] or {}).副本id ~= 副本id then 添加最后对话(数字id,"我好像不认识你吧？？？") return end
--     if 副本数据.无底洞.进行[数字id].进程==5  then
--     对话数据.对话="阿弥陀佛!虽说佛以慈悲为怀，但这妖邪好是凶限，在此地残杀僧众，诸位少侠请再帮贫僧将这妖邪拿下!想这犯事的妖孽都是往僧人下手，请今夜分别化身成沙弥模样，来找出妖邪，诸位行事请特别小心，可别伤了自家性命"
--     对话数据.选项={"请师傅的徒儿帮我变幻身形","我还没装备好"}
--     else
--     对话数据.对话="请完成之前任务！"
--     end
--   end
--   return 对话数据
-- end
-- __GWdh222[915]=function (连接id,数字id,序号,内容)
--   local 事件=内容[1]
--   local 名称=内容[3]
--   if 事件=="请师傅的徒儿帮我变幻身形" then
--     if 任务数据[玩家数据[数字id].地图单位.标识]==nil then return end
--     完成无底洞任务({数字id},玩家数据[数字id].地图单位.标识,915)
--     玩家数据[数字id].地图单位=nil
--     return
--   end
-- end
-- __GWdh111[917]=function(连接id,数字id,序列,标识,地图)
--   local 对话数据 = {}
--     对话数据.模型=任务数据[标识].模型
--   对话数据.名称=任务数据[标识].名称
--   if 任务数据[标识].zhandou==nil then
--     local 副本id=任务数据[标识].副本id
--     if (任务数据[玩家数据[数字id].角色:取任务(996)] or {}).副本id ~= 副本id then 添加最后对话(数字id,"我好像不认识你吧？？？") return end
--     对话数据.对话="小长老，长夜漫漫路迢迢，这深夜出来做什么啊，别人都自在睡觉呢，你还出来。"
--     对话数据.选项={"深夜寺庙女子，这还真是非妖既怪！识破化身，将其收服。","哎呀！多好看的女子"}
--   else
--     对话数据.对话="我正在战斗中，请勿打扰。"
--   end
--   return 对话数据
-- end

-- __GWdh222[917]=function (连接id,数字id,序号,内容)
--   local 事件=内容[1]
--   local 名称=内容[3]
--   if 事件=="深夜寺庙女子，这还真是非妖既怪！识破化身，将其收服。" then
--     if 任务数据[玩家数据[数字id].地图单位.标识]==nil then return end
--     if 任务数据[玩家数据[数字id].地图单位.标识].zhandou~=nil then 常规提示(数字id,"#Y/对方正在战斗中") return  end
--     if 玩家数据[数字id].队伍==0 then 常规提示(数字id,"#Y必须组队才能触发该活动") return end
--     if 取队伍人数(数字id)<1 then 常规提示(数字id,"#Y/挑战无底洞最少要有五人") return  end
--     if 取等级要求(数字id,60)==false then 常规提示(数字id,"#Y/挑战无底洞至少要达到60级") return  end
--     战斗准备类:创建战斗(数字id+0,155612,玩家数据[数字id].地图单位.标识)
--     任务数据[玩家数据[数字id].地图单位.标识].zhandou=true
--     玩家数据[数字id].地图单位=nil
--     return
--   end
-- end
-- __GWdh111[918]=function(连接id,数字id,序列,标识,地图)
--   local 对话数据 = {}
--     对话数据.模型=任务数据[标识].模型
--   对话数据.名称=任务数据[标识].名称
--   if 任务数据[标识].zhandou==nil then
--     local 副本id=任务数据[标识].副本id
--     if (任务数据[玩家数据[数字id].角色:取任务(996)] or {}).副本id ~= 副本id then 添加最后对话(数字id,"我好像不认识你吧？？？") return end
--     对话数据.对话="师父都要成亲了，我老猪也要回高老庄探亲去，你这些人怎么这么肥硕，别挡了我老猪的道。"
--     对话数据.选项={"别胡乱想了，我们一起想办法解决","这身板，我们可对付不了"}
--   else
--     对话数据.对话="我正在战斗中，请勿打扰。"
--   end
--   return 对话数据
-- end

-- __GWdh222[918]=function (连接id,数字id,序号,内容)
--   local 事件=内容[1]
--   local 名称=内容[3]
--   if 事件=="别胡乱想了，我们一起想办法解决" then
--     if 任务数据[玩家数据[数字id].地图单位.标识]==nil then return end
--     if 任务数据[玩家数据[数字id].地图单位.标识].zhandou~=nil then 常规提示(数字id,"#Y/对方正在战斗中") return  end
--     if 玩家数据[数字id].队伍==0 then 常规提示(数字id,"#Y必须组队才能触发该活动") return end
--     if 取队伍人数(数字id)<1 then 常规提示(数字id,"#Y/挑战无底洞最少要有五人") return  end
--     if 取等级要求(数字id,60)==false then 常规提示(数字id,"#Y/挑战无底洞至少要达到60级") return  end
--     战斗准备类:创建战斗(数字id+0,155613,玩家数据[数字id].地图单位.标识)
--     任务数据[玩家数据[数字id].地图单位.标识].zhandou=true
--     玩家数据[数字id].地图单位=nil
--     return
--   end
-- end
-- __GWdh111[921]=function(连接id,数字id,序列,标识,地图)
--   local 对话数据 = {}
--     对话数据.模型=任务数据[标识].模型
--   对话数据.名称=任务数据[标识].名称
--   if 任务数据[标识].zhandou==nil then
--     local 副本id=任务数据[标识].副本id
--     if (任务数据[玩家数据[数字id].角色:取任务(996)] or {}).副本id ~= 副本id then 添加最后对话(数字id,"我好像不认识你吧？？？") return end
--     对话数据.对话="诸位侠义之士，可通过老朽做法帮传送去陷空山无底洞洞府门口。"
--     对话数据.选项={"送我们去无底洞","我还没准备好，稍等再过"}
--   end
--   return 对话数据
-- end
-- __GWdh222[921]=function (连接id,数字id,序号,内容)
--   local 事件=内容[1]
--   local 名称=内容[3]
--   if 事件=="送我们去无底洞" then
--     完成无底洞任务({数字id},玩家数据[数字id].地图单位.标识,921)
--   end
-- end
-- __GWdh111[922]=function(连接id,数字id,序列,标识,地图)
--   local 对话数据={}
--   对话数据.模型=任务数据[标识].模型
--   对话数据.名称=任务数据[标识].名称

--   if 任务数据[标识].zhandou==nil then
--     local 副本id=任务数据[标识].副本id
--     if 玩家数据[数字id].队伍==0 then 常规提示(数字id,"#Y请组队完成！") return   end
--     if (任务数据[玩家数据[数字id].角色:取任务(996)] or {}).副本id ~= 副本id then 添加最后对话(数字id,"我好像不认识你吧？？？") return end
--     任务数据[标识].zhandou=true
--     战斗准备类:创建战斗(数字id+0,155614,标识) --妖精
--     玩家数据[数字id].地图单位=nil
--     return
--   else
--     对话数据.对话="我正在战斗中，请勿打扰。"
--   end
--   return 对话数据
-- end

-- __GWdh111[923]=function(连接id,数字id,序列,标识,地图)
--   local 对话数据 = {}
--     对话数据.模型=任务数据[标识].模型
--   对话数据.名称=任务数据[标识].名称
--   if 任务数据[标识].zhandou==nil then
--     local 副本id=任务数据[标识].副本id
--     if (任务数据[玩家数据[数字id].角色:取任务(996)] or {}).副本id ~= 副本id then 添加最后对话(数字id,"我好像不认识你吧？？？") return end
--     if 副本数据.无底洞.进行[数字id].镇守的妖精==14  then
--     对话数据.对话="(老泪纵横···)我终于脱离这帮龟孙子了!诸位少侠让我这老儿帮你们一番，本仙法力也恢复七七/八，让我施展些神通让你能有洞府妖怪的息，这样能顺利潜入洞府之中。让老夫送诸位一程。"
--     对话数据.选项={"请送我去另一层","我还没准备好，等下再传送"}
--   else
--     对话数据.对话="#47妖精还没清完，老夫无法传送啊！"
--   end
--   end
--   return 对话数据
-- end
-- __GWdh222[923]=function (连接id,数字id,序号,内容)
--   local 事件=内容[1]
--   local 名称=内容[3]
--   if 事件=="请送我去另一层" then
--     完成无底洞任务({数字id},玩家数据[数字id].地图单位.标识,923)
--   end
-- end
-- __GWdh111[924]=function(连接id,数字id,序列,标识,地图)
--   local 对话数据 = {}
--   对话数据.模型=任务数据[标识].模型
--   对话数据.名称=任务数据[标识].名称
--   if 任务数据[标识].zhandou==nil then
--     local 副本id=任务数据[标识].副本id
--     if (任务数据[玩家数据[数字id].角色:取任务(996)] or {}).副本id ~= 副本id then 添加最后对话(数字id,"我好像不认识你吧？？？") return end
--     对话数据.对话="哦? !这气息是...原来是自家人，本将军正有烦心事呢，今个轮到我这洞府巡游值日，但我手底下人偏偏各有个性，喜好各有不同，这安排两两配对巡游值日还是个麻烦事，安排的好，不会生什么是非，如若没安排好，估计就打闹起来，被我们夫人知晓了，定会享我问罪，屁股必会挨个几百下板子。这几位帮我和小的几个交谈，了解下大家喜好，来帮我安排巡游值日。"
--     对话数据.选项={"我想了解你的喜好","我来安排巡游值日","我还没准备好"}
--   end
--   return 对话数据
-- end
-- __GWdh222[924]=function (连接id,数字id,序号,内容)
--   local 事件=内容[1]
--   local 名称=内容[3]
--   if 事件=="我来安排巡游值日" then
--     完成无底洞任务({数字id},玩家数据[数字id].地图单位.标识,924)
--   end
-- end
-- __GWdh111[925]=function(连接id,数字id,序列,标识,地图)
--   local 对话数据 = {}
--   对话数据.模型=任务数据[标识].模型
--   对话数据.名称=任务数据[标识].名称
--   if 任务数据[标识].zhandou==nil then
--     local 副本id=任务数据[标识].副本id
--     if (任务数据[玩家数据[数字id].角色:取任务(996)] or {}).副本id ~= 副本id then 添加最后对话(数字id,"我好像不认识你吧？？？") return end

--     对话数据.对话="本仙已经准备， 这就送各位进入无底洞洞府。"
--     对话数据.选项={"请送我们进入洞府内","我还没准备好呢"}

--   end
--   return 对话数据
-- end
-- __GWdh222[925]=function (连接id,数字id,序号,内容)
--   local 事件=内容[1]
--   local 名称=内容[3]
--   if 事件=="请送我们进入洞府内" then
--     完成无底洞任务({数字id},玩家数据[数字id].地图单位.标识,925)
--   end
-- end
-- __GWdh111[926]=function(连接id,数字id,序列,标识,地图)
--   local 对话数据 = {}
--   对话数据.模型=任务数据[标识].模型
--   对话数据.名称=任务数据[标识].名称
--   if 任务数据[标识].zhandou==nil then
--     local 副本id=任务数据[标识].副本id
--     if (任务数据[玩家数据[数字id].角色:取任务(996)] or {}).副本id ~= 副本id then 添加最后对话(数字id,"我好像不认识你吧？？？") return end

--     对话数据.对话="河弥陀佛!请诸位考虑下我们走哪条路来脱离这无底洞。超过半数的侠土同意哪条路，贫道也就应了这方式同走了。"
--     对话数据.选项={"怕这小妖精，直接冲杀出去","还是智取下好，让我们幻化成小虫进入这妖腹中","让我们商量考虑下"}

--   end
--   return 对话数据
-- end
-- __GWdh222[926]=function (连接id,数字id,序号,内容)
--   local 事件=内容[1]
--   local 名称=内容[3]
--   if 事件=="怕这小妖精，直接冲杀出去" then
--     完成无底洞任务({数字id},玩家数据[数字id].地图单位.标识,926)
--   end
-- end

-- __GWdh111[927]=function(连接id,数字id,序列,标识,地图)
--   local 对话数据={}
--   对话数据.模型=任务数据[标识].模型
--   对话数据.名称=任务数据[标识].名称
--   if 任务数据[标识].zhandou==nil then
--     if 玩家数据[数字id].队伍==0 then 常规提示(数字id,"#Y请组队完成！") return   end
--     任务数据[标识].zhandou=true
--     战斗准备类:创建战斗(数字id+0,155618,标识) --守门天将
--     玩家数据[数字id].地图单位=nil
--     return
--   else
--     对话数据.对话="我正在战斗中，请勿打扰。"
--   end
--   return 对话数据
-- end
-- __GWdh111[928]=function(连接id,数字id,序列,标识,地图)
--   local 对话数据 = {}
--   对话数据.模型=任务数据[标识].模型
--   对话数据.名称=任务数据[标识].名称
--     if 任务数据[标识].zhandou==nil then
--     local 副本id=任务数据[标识].副本id
--     if (任务数据[玩家数据[数字id].角色:取任务(996)] or {}).副本id ~= 副本id then 添加最后对话(数字id,"我好像不认识你吧？？？") return end
--       对话数据.对话="何处人喧哗?你等人在我这云楼宫做什么?"
--       完成无底洞任务({数字id},玩家数据[数字id].地图单位.标识,928)
--     end
--   return 对话数据
-- end
-- __GWdh111[929]=function(连接id,数字id,序列,标识,地图)
--   local 对话数据={}
--   对话数据.模型=任务数据[标识].模型
--   对话数据.名称=任务数据[标识].名称

--   if 任务数据[标识].zhandou==nil then
--     local 副本id=任务数据[标识].副本id
--     if 玩家数据[数字id].队伍==0 then 常规提示(数字id,"#Y请组队完成！") return   end
--     if (任务数据[玩家数据[数字id].角色:取任务(996)] or {}).副本id ~= 副本id then 添加最后对话(数字id,"我好像不认识你吧？？？") return end
--     任务数据[标识].zhandou=true
--     战斗准备类:创建战斗(数字id+0,155616,标识) --鱼肚怪
--     玩家数据[数字id].地图单位=nil
--     return
--   else
--     对话数据.对话="我正在战斗中，请勿打扰。"
--   end
--   return 对话数据
-- end
-- __GWdh111[930]=function(连接id,数字id,序列,标识,地图)
--   local 对话数据={}
--   对话数据.模型=任务数据[标识].模型
--   对话数据.名称=任务数据[标识].名称

--   if 任务数据[标识].zhandou==nil then
--     local 副本id=任务数据[标识].副本id
--     if 玩家数据[数字id].队伍==0 then 常规提示(数字id,"#Y请组队完成！") return   end
--     if (任务数据[玩家数据[数字id].角色:取任务(996)] or {}).副本id ~= 副本id then 添加最后对话(数字id,"我好像不认识你吧？？？") return end
--     任务数据[标识].zhandou=true
--     战斗准备类:创建战斗(数字id+0,155617,标识) --宝箱
--     玩家数据[数字id].地图单位=nil
--     return
--   else
--     对话数据.对话="我正在战斗中，请勿打扰。"
--   end
--   return 对话数据
-- end
-- __GWdh111[931]=function(连接id,数字id,序列,标识,地图)
--   local 对话数据 = {}
--     对话数据.模型=任务数据[标识].模型
--   对话数据.名称=任务数据[标识].名称
--   if 任务数据[标识].zhandou==nil then
--     local 副本id=任务数据[标识].副本id
--     if (任务数据[玩家数据[数字id].角色:取任务(996)] or {}).副本id ~= 副本id then 添加最后对话(数字id,"我好像不认识你吧？？？") return end
--     对话数据.对话="让我带你们去那陷空山救人!"
--     对话数据.选项={"随天王进入洞底","让我们分下人准备下"}
--   end
--   return 对话数据
-- end
-- __GWdh222[931]=function (连接id,数字id,序号,内容)
--   local 事件=内容[1]
--   local 名称=内容[3]
--   if 事件=="随天王进入洞底" then
--     if 任务数据[玩家数据[数字id].地图单位.标识]==nil then return end
--     完成无底洞任务({数字id},玩家数据[数字id].地图单位.标识,931)
--     玩家数据[数字id].地图单位=nil
--     return
--   end
-- end
-- function 结束无底洞副本(任务id)
--   local 副本id = 任务数据[任务id].副本id
--   local 主任务id = 副本数据.无底洞.进行[副本id].主任务id
--   副本数据.无底洞.进行[副本id]=nil
--   local id组 = 任务数据[主任务id].队伍组
--   任务数据[主任务id]=nil
--   for i=1,#id组 do
--     if 玩家数据[id组[i]] then
--       玩家数据[id组[i]].角色:取消任务(996)
--       玩家数据[id组[i]].角色:刷新任务跟踪()
--       if 玩家数据[id组[i]].战斗 ~= 0 and ((战斗准备类.战斗盒子[玩家数据[id组[i]].战斗] or {}).战斗类型==155609 or (战斗准备类.战斗盒子[玩家数据[id组[i]].战斗] or {}).战斗类型==155611 or (战斗准备类.战斗盒子[玩家数据[id组[i]].战斗] or {}).战斗类型==155612 or (战斗准备类.战斗盒子[玩家数据[id组[i]].战斗] or {}).战斗类型==155613 or (战斗准备类.战斗盒子[玩家数据[id组[i]].战斗] or {}).战斗类型==155614 or (战斗准备类.战斗盒子[玩家数据[id组[i]].战斗] or {}).战斗类型==155618 or (战斗准备类.战斗盒子[玩家数据[id组[i]].战斗] or {}).战斗类型==155616 or (战斗准备类.战斗盒子[玩家数据[id组[i]].战斗] or {}).战斗类型==155617) then
--         战斗准备类.战斗盒子[玩家数据[id组[i]].战斗]:结束战斗(0,0,1)
--       end
--     end
--   end
--   for i in pairs(任务数据) do
--     if (任务数据[i].类型 >=90 and 任务数据[i].类型 <=100 or 任务数据[i].类型==105) and 任务数据[i].副本id == 副本id then
--       if 任务数据[i].地图编号 and 任务数据[i].单位编号 then
--         地图处理类:删除单位(任务数据[i].地图编号,任务数据[i].单位编号)
--       end
--       任务数据[i]=nil
--     end
--   end
-- end
-- function 无底洞副本失败(任务id)
--   if os.time()-任务数据[任务id].起始>=任务数据[任务id].结束 and 任务数据[任务id].结束 ~= 99999999 then
--     if 任务数据[任务id].zhandou~=true then  --未进入战斗状态
--       if  任务数据[任务id].类型== 996 then
--         for i=1,#任务数据[任务id].队伍组 do
--           if 玩家数据[任务数据[任务id].队伍组[i]] ~= nil then
--             玩家数据[任务数据[任务id].队伍组[i]].角色:取消任务(玩家数据[任务数据[任务id].队伍组[i]].角色:取任务(996))
--           end
--         end
--         任务数据[任务id]=nil
--       else
--         任务处理类:删除单位(任务id)
--       end
--     end
--   end
-- end
-- function 完成无底洞任务(id组,任务id,战斗类型)
--   local 奖励
--   if 任务数据[任务id] then
--     local 副本id=任务数据[任务id].副本id
--     local 进度刷新=false
--     for i=1,#id组 do
--       local id = id组[i]
--       local 等级 = 玩家数据[id].角色.等级
--       local 经验
--       local 银子
--       local 储备
--       if 战斗类型==155609 then --无底洞强盗0-10
--     local 等级=玩家数据[id].角色.等级
--     local 经验=等级*取随机数(3000,3500)
--     local 银子=等级*取随机数(90,120)+15000
--     玩家数据[id].角色:添加经验(经验,"强盗喽啰")
--     玩家数据[id].角色:添加银子(银子,"强盗喽啰",1)
--     玩家数据[id].zhandou=0
--      elseif 战斗类型==155610 then --无底洞大头领
--     local 等级=玩家数据[id].角色.等级
--     local 经验=等级*取随机数(3000,3200)
--     local 银子=等级*取随机数(90,120)+30000
--     玩家数据[id].角色:添加经验(经验,"大头领")
--     玩家数据[id].角色:添加银子(银子,"大头领",1)
--     玩家数据[id].zhandou=0
--     if 取随机数()<=30 then
--       local 奖励参数=取随机数(1,100)
--       链接={提示=format("#S(副本-无底洞))#R/%s#Y/在#R/无底洞)#Y/表现卓越，额外获得了#G",玩家数据[id].角色.名称),频道="xt",结尾="#Y。"}
--             if 奖励参数<=10 then
--         local 名称="金柳露"
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=15 then
--         local 名称="超级金柳露"
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=16 then
--         local 名称="召唤兽内丹"
--         玩家数据[id].道具:给予超链接道具(id,名称,nil,nil,链接)
--       elseif 奖励参数<=30 then
--         local 名称="魔兽要诀"
--         玩家数据[id].道具:给予超链接道具(id,名称,nil,nil,链接)
--       elseif 奖励参数<=35 then
--         local 名称="五宝盒"
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=50 then
--         local 名称=取强化石()
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=55 then
--         local 名称="九转金丹"
--         玩家数据[id].道具:给予超链接道具(id,名称,取随机数(100,150),nil,链接)
--       elseif 奖励参数<=60 then
--         local 名称=取宝石()
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=70 then
--         local 名称="未鉴定的灵犀玉"
--         玩家数据[id].道具:给予超链接道具(id,名称,nil,nil,链接)
--       elseif 奖励参数<=85 then
--         local 名称="未激活的符石"
--         玩家数据[id].道具:给予超链接道具(id,名称,取随机数(1,1),nil,链接)
--       end
--     end
--      elseif 战斗类型==155611 then --无底洞二头领
--     local 等级=玩家数据[id].角色.等级
--     local 经验=等级*取随机数(3000,3200)
--     local 银子=等级*取随机数(90,120)+34000
--     玩家数据[id].角色:添加经验(经验,"二头领")
--     玩家数据[id].角色:添加银子(银子,"二头领",1)
--     玩家数据[id].zhandou=0
--     if 取随机数()<=30 then
--       local 奖励参数=取随机数(1,100)
--       链接={提示=format("#S(副本-无底洞)#R/%s#Y/在#R/无底洞)#Y/表现卓越，额外获得了#G",玩家数据[id].角色.名称),频道="xt",结尾="#Y。"}
--             if 奖励参数<=10 then
--         local 名称="金柳露"
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=15 then
--         local 名称="超级金柳露"
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=16 then
--         local 名称="召唤兽内丹"
--         玩家数据[id].道具:给予超链接道具(id,名称,nil,nil,链接)
--       elseif 奖励参数<=30 then
--         local 名称="魔兽要诀"
--         玩家数据[id].道具:给予超链接道具(id,名称,nil,nil,链接)
--       elseif 奖励参数<=35 then
--         local 名称="五宝盒"
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=40 then
--         local 名称="高级魔兽要诀"
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=50 then
--         local 名称=取强化石()
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=55 then
--         local 名称="九转金丹"
--         玩家数据[id].道具:给予超链接道具(id,名称,取随机数(100,150),nil,链接)
--       elseif 奖励参数<=60 then
--         local 名称=取宝石()
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=70 then
--         local 名称="未鉴定的灵犀玉"
--         玩家数据[id].道具:给予超链接道具(id,名称,nil,nil,链接)
--       elseif 奖励参数<=75 then
--         local 名称="未激活的符石"
--         玩家数据[id].道具:给予超链接道具(id,名称,取随机数(1,1),nil,链接)
--       end
--     end
--     elseif 战斗类型==155612 then --无底洞可疑少女0-4
--     local 等级=玩家数据[id].角色.等级
--     local 经验=等级*取随机数(4000,4100)
--     local 银子=等级*取随机数(90,120)+14000
--     玩家数据[id].角色:添加经验(经验,"可疑少女")
--     玩家数据[id].角色:添加银子(银子,"可疑少女",1)
--     玩家数据[id].zhandou=0
--   elseif 战斗类型==155613 then --猪八戒
--     local 等级=玩家数据[id].角色.等级
--     local 经验=等级*取随机数(4000,4200)
--     local 银子=等级*取随机数(90,120)+34000
--     玩家数据[id].角色:添加经验(经验,"大头领")
--     玩家数据[id].角色:添加银子(银子,"大头领",1)
--     玩家数据[id].zhandou=0
--     if 取随机数()<=30 then
--       local 奖励参数=取随机数(1,100)
--       链接={提示=format("#S(副本-无底洞))#R/%s#Y/在#R/无底洞)#Y/表现卓越，额外获得了#G",玩家数据[id].角色.名称),频道="xt",结尾="#Y。"}
--             if 奖励参数<=10 then
--         local 名称="金柳露"
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=15 then
--         local 名称="超级金柳露"
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=16 then
--         local 名称="召唤兽内丹"
--         玩家数据[id].道具:给予超链接道具(id,名称,nil,nil,链接)
--       elseif 奖励参数<=30 then
--         local 名称="魔兽要诀"
--         玩家数据[id].道具:给予超链接道具(id,名称,nil,nil,链接)
--       elseif 奖励参数<=35 then
--         local 名称="五宝盒"
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=40 then
--         local 名称="神兜兜"
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=50 then
--         local 名称=取强化石()
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=55 then
--         local 名称="九转金丹"
--         玩家数据[id].道具:给予超链接道具(id,名称,取随机数(100,150),nil,链接)
--       elseif 奖励参数<=60 then
--         local 名称=取宝石()
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=80 then
--         local 名称=取随机玄灵珠()
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=85 then
--         local 名称="未激活的符石"
--         玩家数据[id].道具:给予超链接道具(id,名称,取随机数(1,1),nil,链接)
--       end
--     end
--   elseif 战斗类型==155614 then --无底洞陷空妖精
--     local 等级=玩家数据[id].角色.等级
--     local 经验=等级*取随机数(3000,3200)
--     local 银子=等级*取随机数(90,120)+34000
--     玩家数据[id].角色:添加经验(经验,"大头领")
--     玩家数据[id].角色:添加银子(银子,"大头领",1)
--     玩家数据[id].zhandou=0
--     if 取随机数()<=30 then
--       local 奖励参数=取随机数(1,100)
--       链接={提示=format("#S(副本-无底洞))#R/%s#Y/在#R/无底洞)#Y/表现卓越，额外获得了#G",玩家数据[id].角色.名称),频道="xt",结尾="#Y。"}
--             if 奖励参数<=10 then
--         local 名称="金柳露"
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=15 then
--         local 名称="超级金柳露"
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=16 then
--         local 名称="召唤兽内丹"
--         玩家数据[id].道具:给予超链接道具(id,名称,nil,nil,链接)
--       elseif 奖励参数<=30 then
--         local 名称="魔兽要诀"
--         玩家数据[id].道具:给予超链接道具(id,名称,nil,nil,链接)
--       elseif 奖励参数<=35 then
--         local 名称="五宝盒"
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=40 then
--         local 名称="高级魔兽要诀"
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=50 then
--         local 名称=取强化石()
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=55 then
--         local 名称="九转金丹"
--         玩家数据[id].道具:给予超链接道具(id,名称,取随机数(100,150),nil,链接)
--       elseif 奖励参数<=60 then
--         local 名称=取宝石()
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=80 then
--         local 名称=取随机玄灵珠()
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=85 then
--         local 名称="未激活的符石"
--         玩家数据[id].道具:给予超链接道具(id,名称,取随机数(1,1),nil,链接)
--       end
--     end
--       elseif 战斗类型==155618 then --无底洞守门妖将
--     local 等级=玩家数据[id].角色.等级
--     local 经验=等级*取随机数(3000,3200)
--     local 银子=等级*取随机数(90,120)+32000
--     玩家数据[id].角色:添加经验(经验,"守门妖将")
--     玩家数据[id].角色:添加银子(银子,"守门妖将",1)
--     玩家数据[id].zhandou=0
--     if 取随机数()<=30 then
--       local 奖励参数=取随机数(1,100)
--       链接={提示=format("#S(副本-无底洞)#R/%s#Y/在#R/无底洞#Y/表现卓越，额外获得了#G",玩家数据[id].角色.名称),频道="xt",结尾="#Y。"}
--             if 奖励参数<=10 then
--         local 名称="金柳露"
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=15 then
--         local 名称="超级金柳露"
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=16 then
--         local 名称="召唤兽内丹"
--         玩家数据[id].道具:给予超链接道具(id,名称,nil,nil,链接)
--       elseif 奖励参数<=30 then
--         local 名称="魔兽要诀"
--         玩家数据[id].道具:给予超链接道具(id,名称,nil,nil,链接)
--       elseif 奖励参数<=35 then
--         local 名称="五宝盒"
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=50 then
--         local 名称=取强化石()
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=55 then
--         local 名称="九转金丹"
--         玩家数据[id].道具:给予超链接道具(id,名称,取随机数(100,150),nil,链接)
--       elseif 奖励参数<=60 then
--         local 名称=取宝石()
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=80 then
--         local 名称=取随机玄灵珠()
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=85 then
--         local 名称="未激活的符石"
--         玩家数据[id].道具:给予超链接道具(id,名称,取随机数(1,1),nil,链接)
--       end
--     end
--       elseif 战斗类型==155616 then --无底洞鱼肚怪
--     local 等级=玩家数据[id].角色.等级
--     local 经验=等级*取随机数(3000,3200)
--     local 银子=等级*取随机数(90,120)+32000
--     玩家数据[id].角色:添加经验(经验,"鱼肚怪")
--     玩家数据[id].角色:添加银子(银子,"鱼肚怪",1)
--     玩家数据[id].zhandou=0
--     if 取随机数()<=30 then
--       local 奖励参数=取随机数(1,100)
--       链接={提示=format("#S(副本-无底洞)#R/%s#Y/在#R/无底洞#Y/表现卓越，额外获得了#G",玩家数据[id].角色.名称),频道="xt",结尾="#Y。"}
--             if 奖励参数<=10 then
--         local 名称="金柳露"
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=15 then
--         local 名称="超级金柳露"
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=16 then
--         local 名称="召唤兽内丹"
--         玩家数据[id].道具:给予超链接道具(id,名称,nil,nil,链接)
--       elseif 奖励参数<=30 then
--         local 名称="魔兽要诀"
--         玩家数据[id].道具:给予超链接道具(id,名称,nil,nil,链接)
--       elseif 奖励参数<=35 then
--         local 名称="五宝盒"
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=50 then
--         local 名称=取强化石()
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=55 then
--         local 名称="九转金丹"
--         玩家数据[id].道具:给予超链接道具(id,名称,取随机数(100,150),nil,链接)
--       elseif 奖励参数<=60 then
--         local 名称=取宝石()
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=75 then
--         local 名称=取随机玄灵珠()
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=85 then
--         local 名称="未激活的符石"
--         玩家数据[id].道具:给予超链接道具(id,名称,取随机数(1,1),nil,链接)
--       end
--     end
--       elseif 战斗类型==155617 then --无底洞宝箱
--     local 等级=玩家数据[id].角色.等级
--     local 经验=等级*取随机数(15000,19000)
--     local 银子=等级*取随机数(90,120)+80000
--     玩家数据[id].角色:添加经验(经验,"鱼肚怪")
--     玩家数据[id].角色:添加银子(银子,"鱼肚怪",1)
--     玩家数据[id].zhandou=0
--     if 取随机数()<=90 then
--       local 奖励参数=取随机数(1,100)
--       链接={提示=format("#S(副本-无底洞)#R/%s#Y/在#R/无底洞#Y/表现卓越，额外获得了#G",玩家数据[id].角色.名称),频道="xt",结尾="#Y。"}
--             if 奖励参数<=10 then
--         local 名称="金柳露"
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=15 then
--         local 名称="超级金柳露"
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=16 then
--         local 名称="召唤兽内丹"
--         玩家数据[id].道具:给予超链接道具(id,名称,nil,nil,链接)
--       elseif 奖励参数<=30 then
--         local 名称="魔兽要诀"
--         玩家数据[id].道具:给予超链接道具(id,名称,nil,nil,链接)
--       elseif 奖励参数<=35 then
--         local 名称="五宝盒"
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=40 then
--         local 名称="神兜兜"
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=50 then
--         local 名称=取强化石()
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=55 then
--         local 名称="九转金丹"
--         玩家数据[id].道具:给予超链接道具(id,名称,取随机数(100,150),nil,链接)
--       elseif 奖励参数<=60 then
--         local 名称=取宝石()
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=75 then
--         local 名称=取随机玄灵珠()
--         玩家数据[id].道具:给予超链接道具(id,名称,1,nil,链接)
--       elseif 奖励参数<=85 then
--         local 名称="未鉴定的灵犀玉"
--         玩家数据[id].道具:给予超链接道具(id,名称,取随机数(1,1),nil,链接)
--       end
--     end
--   end
-- end
--     if 战斗类型==997 then
--       local 副本id = 任务数据[任务id].副本id
--       副本数据.无底洞.进行[副本id].进程=2
--       设置无底洞副本(副本id)
--       进度刷新=true

--     elseif 战斗类型==155609 then
--       副本数据.无底洞.进行[副本id].蟊贼=副本数据.无底洞.进行[副本id].蟊贼+1
--       if 副本数据.无底洞.进行[副本id].蟊贼 >= 10 then
--         副本数据.无底洞.进行[副本id].进程=3
--         设置无底洞副本(副本id)
--         进度刷新=true
--       end
--    elseif 战斗类型==155610 then
--         if 玩家数据[id组[1]].角色:取任务(996) and 副本数据.无底洞.进行[副本id].头领.大头领 < 1 then
--       副本数据.无底洞.进行[副本id].头领.大头领=副本数据.无底洞.进行[副本id].头领.大头领+1
--         if 副本数据.无底洞.进行[副本id].头领.大头领>= 1 and 副本数据.无底洞.进行[副本id].头领.二头领 >= 1  then
--         副本数据.无底洞.进行[副本id].进程=4
--         设置无底洞副本(副本id)
--         进度刷新=true
--      end
--      end
--    elseif 战斗类型==155611 then
--         if 玩家数据[id组[1]].角色:取任务(996) and 副本数据.无底洞.进行[副本id].头领.二头领 < 1 then
--       副本数据.无底洞.进行[副本id].头领.二头领=副本数据.无底洞.进行[副本id].头领.二头领+1
--         if 副本数据.无底洞.进行[副本id].头领.大头领>= 1 and 副本数据.无底洞.进行[副本id].头领.二头领 >= 1  then
--         副本数据.无底洞.进行[副本id].进程=4
--         设置无底洞副本(副本id)
--         进度刷新=true
--      end
--      end
--       elseif 战斗类型==914 then
--       local 副本id = 任务数据[任务id].副本id
--       副本数据.无底洞.进行[副本id].进程=5
--       设置无底洞副本(副本id)
--       进度刷新=true
--       任务处理类:副本传送(id组[1],996)
--       elseif 战斗类型==915 then
--       local 副本id = 任务数据[任务id].副本id
--       副本数据.无底洞.进行[副本id].进程=6
--       设置无底洞副本(副本id)
--       local 造型 = "男人_胖和尚"
--       玩家数据[id组[1]].角色.变身数据=造型
--       玩家数据[id组[1]].角色:刷新信息()
--       发送数据(玩家数据[id组[1]].连接id,37,玩家数据[id组[1]].角色.变身数据)
--       发送数据(玩家数据[id组[1]].连接id,5506,{玩家数据[id组[1]].角色:取气血数据()})
--       发送数据(玩家数据[id组[1]].连接id,12)
--       添加变身(id组[1],9)
--       地图处理类:更改模型(id组[1],玩家数据[id组[1]].角色.变身数据,1,玩家数据[id组[1]].角色.地图数据.编号)
--       进度刷新=true
--     elseif 战斗类型==155612 then
--       副本数据.无底洞.进行[副本id].神秘少女=副本数据.无底洞.进行[副本id].神秘少女+1
--         if 副本数据.无底洞.进行[副本id].神秘少女 == 3 then
--         发送数据(玩家数据[id组[1]].连接id,6558,{调用={996,1}})
--         end
--       if 副本数据.无底洞.进行[副本id].神秘少女 >= 4 then--4
--         副本数据.无底洞.进行[副本id].进程=7
--         设置无底洞副本(副本id)
--         进度刷新=true
--       end
--     elseif 战斗类型==155613 then
--       副本数据.无底洞.进行[副本id].八戒=副本数据.无底洞.进行[副本id].八戒+1
--       if 副本数据.无底洞.进行[副本id].八戒 >= 1 then--4
--         副本数据.无底洞.进行[副本id].进程=8
--         设置无底洞副本(副本id)
--         进度刷新=true
--       end
--     elseif 战斗类型==155618 then
--       副本数据.无底洞.进行[副本id].数量=副本数据.无底洞.进行[副本id].数量+1
--       if 副本数据.无底洞.进行[副本id].数量>= 2 then--2
--         副本数据.无底洞.进行[副本id].进程=14
--         设置无底洞副本(副本id)
--         进度刷新=true
--         任务处理类:副本传送(id组[1],996)
--       end
--     elseif 战斗类型==155616 then

--       副本数据.无底洞.进行[副本id].鱼肚怪=副本数据.无底洞.进行[副本id].鱼肚怪+1
--       if 副本数据.无底洞.进行[副本id].鱼肚怪>= 2 then--2
--         副本数据.无底洞.进行[副本id].进程=16
--         设置无底洞副本(副本id)
--         进度刷新=true
--       end
--     elseif 战斗类型==921 then
--         副本数据.无底洞.进行[副本id].进程=9
--         设置无底洞副本(副本id)
--         进度刷新=true
--         任务处理类:副本传送(id组[1],996)
--     elseif 战斗类型==923 then
--         副本数据.无底洞.进行[副本id].进程=10
--         设置无底洞副本(副本id)
--         进度刷新=true
--         任务处理类:副本传送(id组[1],996)
--     elseif 战斗类型==924 then
--         副本数据.无底洞.进行[副本id].进程=11
--         设置无底洞副本(副本id)
--         进度刷新=true
--     elseif 战斗类型==925 then
--         副本数据.无底洞.进行[副本id].进程=12
--         设置无底洞副本(副本id)
--         进度刷新=true
--         任务处理类:副本传送(id组[1],996)
--     elseif 战斗类型==926 then
--         副本数据.无底洞.进行[副本id].进程=13
--         设置无底洞副本(副本id)
--         进度刷新=true
--     elseif 战斗类型==928 then
--         副本数据.无底洞.进行[副本id].进程=15
--         设置无底洞副本(副本id)
--         进度刷新=true
--     elseif 战斗类型==931 then
--         副本数据.无底洞.进行[副本id].进程=17
--         设置无底洞副本(副本id)
--         进度刷新=true
--         任务处理类:副本传送(id组[1],996)
--     elseif 战斗类型==155614 then
--       副本数据.无底洞.进行[副本id].镇守的妖精=副本数据.无底洞.进行[副本id].镇守的妖精+1
--     elseif 战斗类型==155617 then
--       local id组 = 任务数据[副本数据.无底洞.进行[副本id].主任务id].队伍组
--       for i=1,#id组 do
--         if 玩家数据[id组[i]] then
--         	玩家数据[id组[i]].zhandou=0
--           地图处理类:跳转地图(id组[i],1001,358,35)
--           玩家数据[id组[i]].角色:添加副本积分(200)
--           玩家数据[id组[i]].角色:添加每日活跃度(id组[i], 5)
--           更新玩家每日(id组[i],"副本任务","无底洞")
--           常规提示(id组[i],"#Y/恭喜你们完成无底洞副本")
--         end
--       end
--      结束无底洞副本(任务id)
--       return
--     end
--     local id组 = 任务数据[副本数据.无底洞.进行[副本id].主任务id].队伍组
--     for i=1,#id组 do
--       if 玩家数据[id组[i]] then
--         玩家数据[id组[i]].角色:刷新任务跟踪()
--         if 进度刷新 then
--           常规提示(id组[i],"#Y/您的副本进度已经更新")
--         end
--       end
--     end
--     if 任务数据[任务id] and 任务数据[任务id].地图编号 and 任务数据[任务id].单位编号 then
--       地图处理类:删除单位(任务数据[任务id].地图编号,任务数据[任务id].单位编号)
--     end
--     任务数据[任务id]=nil
--   end
-- end
-- function 副本_无底洞:任务说明(玩家id,任务id)
--   local 说明 = {}
--   local 副本id=任务数据[任务id].副本id
--   if 副本数据.无底洞.进行[副本id]==nil then
--     说明={"无底洞","#L您的副本已经完成"}
--   else
--     local 进程=副本数据.无底洞.进行[副本id].进程
--     local 数量=副本数据.无底洞.进行[副本id].数量
--     local 序列=副本数据.无底洞.进行[副本id].序列
--     if 进程==1 then
--       说明={"无底洞",format("#L前方好像有女子在哭泣，赶去看看情况！(剩余#R/%s#W/分钟)",取分((任务数据[任务id].结束-(os.time()-任务数据[任务id].起始))))}
--     elseif 进程==2 then
--       说明={"无底洞",format("#L这女子一家人祭祖时遭遇蟊贼，少侠上山劝服山野蟊贼(完成度:#G/%s#W//10)。副本剩余#R/%s#W/分钟)",副本数据.无底洞.进行[副本id].蟊贼,取分((任务数据[任务id].结束-(os.time()-任务数据[任务id].起始))))}
--     elseif 进程==3 then
--       说明={"无底洞",format("#L擒贼先擒王！去把这两个山贼头领收拾了。\n大头领:(#G/%s#W//1)\n二头领:(#G/%s#W//1)\n副本剩余#R/%s#W/分钟)",副本数据.无底洞.进行[副本id].头领.大头领,副本数据.无底洞.进行[副本id].头领.二头领,取分((任务数据[任务id].结束-(os.time()-任务数据[任务id].起始))))}
--     elseif 进程==4 then
--       说明={"无底洞",format("#L向山脚下的".."#Y/qqq|黑松林土地老儿*6047*临时npc*54*88/黑松林土地老儿".."#L询问唐僧师徒的去处。副本剩余#R/%s#W/分钟",取分((任务数据[任务id].结束-(os.time()-任务数据[任务id].起始))))}
--     elseif 进程==5 then
--       说明={"无底洞",format("#L从后院传来救命声？！随唐僧一起赶到后院看看吧。副本剩余#R/%s#W/分钟",取分((任务数据[任务id].结束-(os.time()-任务数据[任务id].起始))))}
--     elseif 进程==6 then
--       说明={"无底洞",format("#L庙中出现了几名神秘女子上前收服(完成度:#G/%s#W//4)。副本剩余#R/%s#W/分钟",副本数据.无底洞.进行[副本id].神秘少女,取分((任务数据[任务id].结束-(os.time()-任务数据[任务id].起始))))}
--     elseif 进程==7 then
--       说明={"无底洞",format("#L向前院的".."#Y/qqq|八戒*6048*临时npc*10*87/八戒".."#L询问情况。副本剩余#R/%s#W/分钟",取分((任务数据[任务id].结束-(os.time()-任务数据[任务id].起始))))}
--     elseif 进程==8 then
--       说明={"无底洞",format("#L唐僧被妖精设计掳走，问问".."#Y/qqq|土地老儿*6048*临时npc*38*61/土地老儿".."#L如何去无底洞。副本剩余#R/%s#W/分钟",取分((任务数据[任务id].结束-(os.time()-任务数据[任务id].起始))))}
--     elseif 进程==9 then
--       说明={"无底洞",format("#L收服14个镇守的妖精，解救".."#Y/qqq|陷空山土地*6049*临时npc*53*27/陷空山土地".."#L。(完成度:#G/%s#W//14)。副本剩余#R/%s#W/分钟",副本数据.无底洞.进行[副本id].镇守的妖精,取分((任务数据[任务id].结束-(os.time()-任务数据[任务id].起始))))}
--     elseif 进程==10 then
--       说明={"无底洞",format("#L上前问问镇守这层的妖精".."#Y/qqq|白面将军*6050*临时npc*52*9/白面将军".."#L。副本剩余#R/%s#W/分钟",取分((任务数据[任务id].结束-(os.time()-任务数据[任务id].起始))))}
--     elseif 进程==11 then
--       说明={"无底洞",format("#L".."#Y/qqq|陷空山土地*6050*临时npc*40*15/陷空山土地".."#L已经恢复了法力，快通过他进入洞府。副本剩余#R/%s#W/分钟",取分((任务数据[任务id].结束-(os.time()-任务数据[任务id].起始))))}
--     elseif 进程==12 then
--       说明={"无底洞",format("#L妖精正巧外出，快和".."#Y/qqq|玄奘法师*6051*临时npc*47*23/玄奘法师".."#L谈谈如何应对。副本剩余#R/%s#W/分钟",取分((任务数据[任务id].结束-(os.time()-任务数据[任务id].起始))))}
--     elseif 进程==13 then
--       说明={"无底洞",format("#L不惧这妖精，带着唐僧突破这守门妖怪的围攻吧(完成度:#G/%s#W//2)。副本剩余#R/%s#W/分钟",副本数据.无底洞.进行[副本id].数量,取分((任务数据[任务id].结束-(os.time()-任务数据[任务id].起始))))}
--     elseif 进程==14 then
--       说明={"无底洞",format("#L唐僧在被妖精掳走，这里供有李天王和哪咤三太子的铭牌，去天庭问问。副本剩余#R/%s#W/分钟",取分((任务数据[任务id].结束-(os.time()-任务数据[任务id].起始))))}
--     elseif 进程==15 then
--       说明={"无底洞",format("#L协助齐天大圣对付李天王的两名天庭兵将(完成度:#G/%s#W//2)。副本剩余#R/%s#W/分钟",副本数据.无底洞.进行[副本id].鱼肚怪,取分((任务数据[任务id].结束-(os.time()-任务数据[任务id].起始))))}
--     elseif 进程==16 then
--       说明={"无底洞",format("#L误会化解，与托塔李天王谈谈，跟随他进入洞内。副本剩余#R/%s#W/分钟",取分((任务数据[任务id].结束-(os.time()-任务数据[任务id].起始))))}
--     elseif 进程==17 then
--       说明={"无底洞",format("#L在迷宫中找寻灯芯，在前往点亮火台，破除禁锢。副本剩余#R/%s#W/分钟",取分((任务数据[任务id].结束-(os.time()-任务数据[任务id].起始))))}
--     end
--   end
--   return 说明
-- end
-- function 添加变身(id,变化之术)
--   local 任务id=id.."_1_"..os.time()
--   local 结束时间=15*(1+变化之术)*60
--   任务数据[任务id]={
--     id=任务id,
--     起始=os.time(),
--     结束=结束时间,
--     玩家id=id,
--     队伍组={},
--     类型=1
--   }
--   玩家数据[id].角色:添加任务(任务id)
--   发送数据(玩家数据[id].连接id,39)
-- end
-- return 副本_无底洞